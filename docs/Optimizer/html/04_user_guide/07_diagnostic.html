

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Optimization diagnostic &mdash; optimizer 1.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/qb1-sphinx-rtd.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme-overrides.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/optimizer.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Historical penalties" href="08_history_penalty.html" />
    <link rel="prev" title="Plotting" href="06_plotting.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> optimizer
          

          
          </a>

          
            
            
              <div class="version">
                1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/01_introduction.html">What is Optimizer?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/01_introduction.html#using-optimizer">Using Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/01_introduction.html#is-optimizer-right-for-my-problem">Is Optimizer right for my problem?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/01_introduction.html#assumptions">Assumptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/01_introduction.html#faq">FAQ</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../02_getting_started/01_prerequisites.html">Installation prerequisites</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_getting_started/01_prerequisites.html#python-virtual-environments">Python virtual environments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../02_getting_started/01_prerequisites.html#using-conda">Using <code class="docutils literal notranslate"><span class="pre">conda</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../02_getting_started/01_prerequisites.html#installing-requirements">Installing requirements</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02_getting_started/02_install.html">Installation guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../03_tutorial/01_solver_api.html">Solver API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/01_solver_api.html#ask-and-tell-pattern">Ask and Tell pattern</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../03_tutorial/01_solver_api.html#standard-solve-pattern">Standard solve pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../03_tutorial/01_solver_api.html#solving-with-ask-and-tell">Solving with Ask and Tell</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/01_solver_api.html#further-reading">Further reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_tutorial/02_toy_problem.html">Toy problem</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/02_toy_problem.html#The-Solver">The Solver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../03_tutorial/02_toy_problem.html#ask-method"><code class="docutils literal notranslate"><span class="pre">ask</span></code> method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/02_toy_problem.html#Evaluating">Evaluating</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../03_tutorial/02_toy_problem.html#tell-method"><code class="docutils literal notranslate"><span class="pre">tell</span></code> method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/02_toy_problem.html#Solver-loop">Solver loop</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_tutorial/03_constraints.html">Constraints</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/03_constraints.html#Constraints-as-penalty-functions">Constraints as penalty functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/03_constraints.html#Constraints-as-repair-functions">Constraints as repair functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/03_constraints.html#Warning-about-pickling-constraints">Warning about pickling constraints</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_tutorial/04_optimization_problem.html">Optimization problem</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/04_optimization_problem.html#Maximizing-a-problem">Maximizing a problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_tutorial/04_optimization_problem.html#The-StatefulOptimizationProblem">The <code class="docutils literal notranslate"><span class="pre">StatefulOptimizationProblem</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../03_tutorial/04_optimization_problem.html#StatefulOptimizationProblem-with-Numpy"><code class="docutils literal notranslate"><span class="pre">StatefulOptimizationProblem</span></code> with <code class="docutils literal notranslate"><span class="pre">Numpy</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../03_tutorial/04_optimization_problem.html#StatefulOptimizationProblem-with-Pandas"><code class="docutils literal notranslate"><span class="pre">StatefulOptimizationProblem</span></code> with <code class="docutils literal notranslate"><span class="pre">Pandas</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="01_penalty.html">Penalty</a><ul>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Constraint-types">Constraint types</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Equality-constraints">Equality constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Model-based-constraints">Model-based constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Dealing-with-a-computationally-expensive-constraint">Dealing with a computationally expensive constraint</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Penalty-options">Penalty options</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Changing-the-penalty-multiplier-(\lambda)">Changing the penalty multiplier (<span class="math notranslate nohighlight">\(\lambda\)</span>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="01_penalty.html#Set-based-constraints">Set-based constraints</a><ul>
<li class="toctree-l3"><a class="reference internal" href="01_penalty.html#A-comment-on-set-constraints:">A comment on set constraints:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="02_repair.html">Repair</a><ul>
<li class="toctree-l2"><a class="reference internal" href="02_repair.html#MultipleOf-and-Integer-constraints"><code class="docutils literal notranslate"><span class="pre">MultipleOf</span></code> and <code class="docutils literal notranslate"><span class="pre">Integer</span></code> constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="02_repair.html#User-defined-set-constraints">User defined set constraints</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="03_solver.html">Solver</a><ul>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#basesolver"><code class="docutils literal notranslate"><span class="pre">BaseSolver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#scaledsolver"><code class="docutils literal notranslate"><span class="pre">ScaledSolver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#differentialevolutionsolver"><code class="docutils literal notranslate"><span class="pre">DifferentialEvolutionSolver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#evolutionarystrategiessolver"><code class="docutils literal notranslate"><span class="pre">EvolutionaryStrategiesSolver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#particleswarmsolver"><code class="docutils literal notranslate"><span class="pre">ParticleSwarmSolver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#simulatedannealingsolver"><code class="docutils literal notranslate"><span class="pre">SimulatedAnnealingSolver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="03_solver.html#discretelocalsearchsolver"><code class="docutils literal notranslate"><span class="pre">DiscreteLocalSearchSolver</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="04_stopper.html">Stoppers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="04_stopper.html#noimprovementstopper"><code class="docutils literal notranslate"><span class="pre">NoImprovementStopper</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="04_stopper.html#walltimestopper"><code class="docutils literal notranslate"><span class="pre">WallTimeStopper</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="04_stopper.html#satisfiedconstraintstopper"><code class="docutils literal notranslate"><span class="pre">SatisfiedConstraintStopper</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="05_logger.html">Logger</a><ul>
<li class="toctree-l2"><a class="reference internal" href="05_logger.html#basiclogger"><code class="docutils literal notranslate"><span class="pre">BasicLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="05_logger.html#penaltylogger"><code class="docutils literal notranslate"><span class="pre">PenaltyLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="05_logger.html#nbestlogger"><code class="docutils literal notranslate"><span class="pre">NBestLogger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="05_logger.html#file-based-logging">File-Based Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="06_plotting.html">Plotting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="06_plotting.html#Convergence-plot">Convergence plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_plotting.html#Penalty-plot">Penalty plot</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Optimization diagnostic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#What-this-is">What this is</a></li>
<li class="toctree-l3"><a class="reference internal" href="#What-this-is-not">What this is not</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#The-optimization-model">The optimization model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#The-diagnostic">The diagnostic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Violated-soft-constraints">Violated soft constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Changing-the-inequality-bound">Changing the inequality bound</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Impact-we-can-achieve-on-objective-value-by-changing-inequality">Impact we can achieve on objective value by changing inequality</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Extrapolation-pitfall">Extrapolation pitfall</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Complex-problem-support">Complex problem support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="08_history_penalty.html">Historical penalties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="08_history_penalty.html#Overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="08_history_penalty.html#What-this-is">What this is</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_history_penalty.html#What-this-is-not">What this is not</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="08_history_penalty.html#The-historical-data-and-the-optimization-problem">The historical data and the optimization problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="08_history_penalty.html#Using-the-historical-penalty">Using the historical penalty</a><ul>
<li class="toctree-l3"><a class="reference internal" href="08_history_penalty.html#Validating-that-history-is-constraining-our-solutions">Validating that history is constraining our solutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_history_penalty.html#Choosing-the-multiplier">Choosing the multiplier</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_history_penalty.html#Pandas-support">Pandas support</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_history_penalty.html#Pipeline-support">Pipeline support</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="09_adaptive_differential_evolution.html">Adaptive Differential Evolution example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="09_adaptive_differential_evolution.html#Vanilla-DE-logic">Vanilla DE logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_adaptive_differential_evolution.html#What-can-we-define-and-tune?">What can we define and tune?</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_adaptive_differential_evolution.html#Adaptive-Differential-Evolution">Adaptive Differential Evolution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="09_adaptive_differential_evolution.html#Some-setup">Some setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="09_adaptive_differential_evolution.html#Sample-run-of-two-approaches">Sample run of two approaches</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_adaptive_differential_evolution.html#Picking-mutator-based-on-prior-success">Picking mutator based on prior success</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_adaptive_differential_evolution.html#Using-an-adaptive-parameter">Using an adaptive parameter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="09_adaptive_differential_evolution.html#Happy-hacking!">Happy hacking!</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../05_examples/warm_start.html">Warm start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/warm_start.html#Problem-setup">Problem setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/warm_start.html#Warm-starting-ParticleSwarmSolver">Warm starting <code class="docutils literal notranslate"><span class="pre">ParticleSwarmSolver</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../05_examples/de_hyperparameters.html">Tuning differential evolution hyperparameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/de_hyperparameters.html#Setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/de_hyperparameters.html#Effect-of-strategy">Effect of <code class="docutils literal notranslate"><span class="pre">strategy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/de_hyperparameters.html#Effect-of-popsize">Effect of <code class="docutils literal notranslate"><span class="pre">popsize</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/de_hyperparameters.html#Effect-of-mutation">Effect of <code class="docutils literal notranslate"><span class="pre">mutation</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_examples/de_hyperparameters.html#Effect-of-recombination">Effect of <code class="docutils literal notranslate"><span class="pre">recombination</span></code></a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../06_optimizer_api/modules.html">optimizer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../06_optimizer_api/optimizer.html">optimizer package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../06_optimizer_api/optimizer.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.constraint.html">optimizer.constraint package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.experimental.html">optimizer.experimental package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.loggers.html">optimizer.loggers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.plotting.html">optimizer.plotting package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.problem.html">optimizer.problem package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.solvers.html">optimizer.solvers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.stoppers.html">optimizer.stoppers package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.testing.html">optimizer.testing package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../06_optimizer_api/optimizer.utils.html">optimizer.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../06_optimizer_api/optimizer.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06_optimizer_api/optimizer.html#module-optimizer.exceptions">optimizer.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../06_optimizer_api/optimizer.html#module-optimizer.types">optimizer.types module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">optimizer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          








    



    
















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Optimization diagnostic</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <!-- User defined GitHub URL -->
              <a href="https://git.mckinsey-solutions.com/opm/optimus" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">UserWarning</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Optimization-diagnostic">
<h1>Optimization diagnostic<a class="headerlink" href="#Optimization-diagnostic" title="Permalink to this headline">¶</a></h1>
<p>A combination of a logger and a plotting functionality provides some detail into how the objective value, control variables and constraints interact.</p>
<div class="section" id="Overview">
<h2>Overview<a class="headerlink" href="#Overview" title="Permalink to this headline">¶</a></h2>
<p>Being certain that the optimizer behaves in an expected manner is paramount. The first evidence of this is that the best solution converges to some value. It is also a good idea to understand how the constraints affect the optimization run. We can do this by looking which constraints are violated and make us pay a penalty, which are close to be violated and which are irrelevant for our optimization run. In this document we’ll explore a set of questions for which we can get directional answers.</p>
<div class="section" id="What-this-is">
<h3>What this is<a class="headerlink" href="#What-this-is" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A tutorial on how to diagnose optimization runs and understand interactions with constraints</li>
<li>A warning on a possible pitfall when using this tool to value de-constraining initiatives (i.e., what-if questions related to major operation changes)</li>
<li>An example of how to set this up with a <code class="docutils literal notranslate"><span class="pre">StatefulOptimizationProblem</span></code></li>
</ul>
</div>
<div class="section" id="What-this-is-not">
<h3>What this is not<a class="headerlink" href="#What-this-is-not" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A guide into optimization algorithms and their tuning</li>
<li>A guide into how to properly set-up an optimization problem (penalty tuning, repair functions, etc)</li>
<li>A real world optimizer use case</li>
</ul>
</div>
</div>
<div class="section" id="The-optimization-model">
<h2>The optimization model<a class="headerlink" href="#The-optimization-model" title="Permalink to this headline">¶</a></h2>
<p>Throughout the first part of the tutorial we’ll use a small linear optimization problem. However, everything we discuss here is applicable to non-linear, bigger and more complex optimization problems.</p>
<p>Suppose we have this problem, where we want to maximize the sum of three variables subject to three inequalities:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\max \quad &amp; \sum_i x_i \\
\text{s.t.} \quad &amp; x_0 + x_1 \leq 10 &amp;\\
 \quad &amp; x_1 + x_2 \leq 25 &amp;\\
 \quad &amp; x_0 + 2 x_1 + 3 x_2 \leq 40 &amp;\\
&amp; 0 \leq x_{i} \leq 30 &amp; \text{for each } i \in \{0,1,2\}
\end{align*}\end{split}\]</div>
<p>Unless we do some algebra, it’s not obvious which is the limiting constraint. Let’s run our optimization, log with a <code class="docutils literal notranslate"><span class="pre">BestTrajectoryLogger</span></code>, and plot how the constraints behave as the optimizer explores the search space. We do this by calling <code class="docutils literal notranslate"><span class="pre">best_trajectory_plot</span></code>.</p>
<p>We will be adjusting the constraints during this guide and re-utilize the same optimization routine. Let’s define the <code class="docutils literal notranslate"><span class="pre">solve_and_plot_lp</span></code> function for this.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">optimizer</span> <span class="kn">import</span> <span class="n">penalty</span>
<span class="kn">from</span> <span class="nn">optimizer.solvers</span> <span class="kn">import</span> <span class="n">ParticleSwarmSolver</span>
<span class="kn">from</span> <span class="nn">optimizer.loggers</span> <span class="kn">import</span> <span class="n">BestTrajectoryLogger</span>
<span class="kn">from</span> <span class="nn">optimizer.plotting</span> <span class="kn">import</span> <span class="n">best_trajectory_plot</span><span class="p">,</span> <span class="n">best_trajectory_problem_plot</span>

<span class="k">def</span> <span class="nf">solve_and_plot_lp</span><span class="p">(</span><span class="n">penalties</span><span class="p">):</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

    <span class="n">solver</span> <span class="o">=</span> <span class="n">ParticleSwarmSolver</span><span class="p">(</span>
        <span class="n">bounds</span><span class="p">,</span>
        <span class="n">sense</span><span class="o">=</span><span class="s2">&quot;maximize&quot;</span><span class="p">,</span>
        <span class="n">popsize</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
        <span class="n">maxiter</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
        <span class="n">init</span><span class="o">=</span><span class="s1">&#39;random&#39;</span><span class="p">,</span>
        <span class="n">cognitive_parameter</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
        <span class="n">inertia</span><span class="o">=</span><span class="mf">0.15</span>
    <span class="p">)</span>

    <span class="n">best_trajectory_logger</span> <span class="o">=</span> <span class="n">BestTrajectoryLogger</span><span class="p">()</span>

    <span class="k">while</span> <span class="ow">not</span> <span class="n">solver</span><span class="o">.</span><span class="n">stop</span><span class="p">():</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">ask</span><span class="p">()</span>
        <span class="n">objective_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="n">p</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">penalties</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">tell</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">objective_values</span><span class="p">)</span>

        <span class="n">best_trajectory_logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best solution: {str(solver.best()[0]): &gt;56}&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best objective with penalties: {solver.best()[1]: &gt;8.2f}&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x0+x1+x2: {solver.best()[0].sum():&gt;29.2f}&quot;</span><span class="p">)</span>
    <span class="n">best_trajectory_plot</span><span class="p">(</span><span class="n">best_trajectory_logger</span><span class="p">,</span> <span class="n">penalties</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">variable_labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="s1">&#39;x1&#39;</span><span class="p">,</span> <span class="s1">&#39;x2&#39;</span><span class="p">]);</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="The-diagnostic">
<h2>The diagnostic<a class="headerlink" href="#The-diagnostic" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">solve_and_plot_lp</span><span class="p">([</span>
        <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+x1&lt;=10&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
        <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x1+x2&lt;=25&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
        <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+2x1+3x2 &lt;= 40&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Best solution:                    [ 9.99999699  0.         10.00000067]
Best objective with penalties:    20.00
x0+x1+x2:                         20.00
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/04_user_guide_07_diagnostic_6_1.png" src="../_images/04_user_guide_07_diagnostic_6_1.png" />
</div>
</div>
<p>The above chart has on the horizontal axis the iteration of the optimizer. There are four charts in this diagnostic: - <strong>Convergence plot.</strong> This first chart is the objective value as function of time. We see that as the algorithm progresses, we improve our solution. - <strong>Optimized Variables plot.</strong> The second chart gives us an idea of how the parameters evolved in time: The darker the green, the closer the variable is to it’s upper bound. We see that none of the variables are close to their
higher bound, while <span class="math notranslate nohighlight">\(x_1\)</span> is very light since it’s on the lower end of it’s range. Well, it’s actually <span class="math notranslate nohighlight">\(0\)</span>. - <strong>Slack Values plot.</strong> The third chart is capturing the distance of each constraint to it’s bound: if it’s light blue then the distance is high (and thus the constraint isn’t “tight” or “restrictive”); if the blue is dark, then there is no much room left between the value and the bound. If it is red though, it means that the constraint is violated. In this case, the first and
the third constraints are tight, while the second is not (<span class="math notranslate nohighlight">\(x_1+x_2 = 10 \leq 25\)</span>). - <strong>Penalty constraint violations plot.</strong> The fourth chart is about how much are we paying for each of the soft constraints. In this case we do not incur any penalty (because incurring a penalty is too expensive with a multiplier = <span class="math notranslate nohighlight">\(1000\)</span>)</p>
<p>Just for having this problem at eye-sight:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\max \quad &amp; \sum_i x_i \\
\text{s.t.} \quad &amp; x_0 + x_1 \leq 10 &amp;\\
 \quad &amp; x_1 + x_2 \leq 25 &amp;\\
 \quad &amp; x_0 + 2 x_1 + 3 x_2 \leq 40 &amp;\\
&amp; 0 \leq x_{i} \leq 30 &amp; \text{for each } i \in \{0,1,2\}
\end{align*}\end{split}\]</div>
<div class="section" id="Violated-soft-constraints">
<h3>Violated soft constraints<a class="headerlink" href="#Violated-soft-constraints" title="Permalink to this headline">¶</a></h3>
<p>Let us relax the hardness of the third constraint by reducing the penalty multiplier, and observe what happens with the optimization run.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">solve_and_plot_lp</span><span class="p">(</span><span class="n">penalties</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+x1&lt;=10&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x1+x2&lt;=25&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+2x1+3x2 &lt;= 40&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=.</span><span class="mi">25</span><span class="p">)</span>  <span class="c1"># this becomes a not so expensive penalty with this multiplier</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Best solution:                    [ 9.99999971  0.         24.99999858]
Best objective with penalties:    23.75
x0+x1+x2:                         35.00
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/04_user_guide_07_diagnostic_9_1.png" src="../_images/04_user_guide_07_diagnostic_9_1.png" />
</div>
</div>
<p>Now we get a higher objective value (we went from <span class="math notranslate nohighlight">\(20\)</span> to <span class="math notranslate nohighlight">\(23.75\)</span>), and we also see a couple of things: - The first and second constraints are now tight - we still don’t violate them because it’s very expensive what we would pay in penalties. - We see that we always violate the third constraint. And towards the end we pay more than at the beginning – there is a tradeoff between violating the third constraint and the increase in objective value we get. Clearly, it makes sense to
violate it since we increased our objective value to <span class="math notranslate nohighlight">\(23.7\)</span> from <span class="math notranslate nohighlight">\(20\)</span>. - The <span class="math notranslate nohighlight">\(x_2\)</span> variable is closer to it’s upper bound (<span class="math notranslate nohighlight">\(25\)</span> instead of <span class="math notranslate nohighlight">\(10\)</span> as in previous solution).</p>
</div>
<div class="section" id="Changing-the-inequality-bound">
<h3>Changing the inequality bound<a class="headerlink" href="#Changing-the-inequality-bound" title="Permalink to this headline">¶</a></h3>
<p>Suppose we challenge the team on the second constraint and after a series of discussions we learn ‘<span class="math notranslate nohighlight">\(25\)</span> is conservative indeed, we can easily do <span class="math notranslate nohighlight">\(35\)</span>’. We knew it was tight with <span class="math notranslate nohighlight">\(25\)</span>, but what will happen with <span class="math notranslate nohighlight">\(35\)</span>?</p>
<p>Let’s try it!</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\max \quad &amp; \sum_i x_i \\
\text{s.t.} \quad &amp; x_0 + x_1 \leq 10 &amp;\\
 \quad &amp; x_1 + x_2 \leq 35 &amp;\\
 \quad &amp; x_0 + 2 x_1 + 3 x_2 \leq 40 &amp;\\
&amp; 0 \leq x_{i} \leq 30 &amp; \text{for each } i \in \{0,1,2\}
\end{align*}\end{split}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">solve_and_plot_lp</span><span class="p">(</span><span class="n">penalties</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+x1&lt;=10&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x1+x2&lt;=35&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+2x1+3x2 &lt;= 40&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=.</span><span class="mi">25</span><span class="p">)</span>  <span class="c1"># this becomes a not so expensive penalty with this multiplier</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Best solution:                    [ 9.99999999  0.         30.        ]
Best objective with penalties:    25.00
x0+x1+x2:                         40.00
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/04_user_guide_07_diagnostic_11_1.png" src="../_images/04_user_guide_07_diagnostic_11_1.png" />
</div>
</div>
<p>Note that - The objective value increased from <span class="math notranslate nohighlight">\(23.75\)</span> to <span class="math notranslate nohighlight">\(25\)</span>. This makes sense since we relaxed a constraint! - We now see that the first constraint is the only tight one, the third is violated and the second isn’t tight. - In a client setting, this would suggest challenging the first constraint rather than the second – the model gives us a tip that if we relax that we’ll get bigger objective value.</p>
</div>
<div class="section" id="Impact-we-can-achieve-on-objective-value-by-changing-inequality">
<h3>Impact we can achieve on objective value by changing inequality<a class="headerlink" href="#Impact-we-can-achieve-on-objective-value-by-changing-inequality" title="Permalink to this headline">¶</a></h3>
<p>Our current solution has objective value <span class="math notranslate nohighlight">\(25\)</span>. Let’s see if relaxing the constraint bound a bit (from <span class="math notranslate nohighlight">\(10\)</span> to <span class="math notranslate nohighlight">\(12\)</span>) we increase the value:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\max \quad &amp; \sum_i x_i \\
\text{s.t.} \quad &amp; x_0 + x_1 \leq 12 &amp;\\
 \quad &amp; x_1 + x_2 \leq 35 &amp;\\
 \quad &amp; x_0 + 2 x_1 + 3 x_2 \leq 40 &amp;\\
&amp; 0 \leq x_{i} \leq 30 &amp; \text{for each } i \in \{0,1,2\}
\end{align*}\end{split}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">solve_and_plot_lp</span><span class="p">(</span><span class="n">penalties</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+x1&lt;=12&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x1+x2&lt;=35&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=</span><span class="mi">1000</span><span class="p">),</span>  <span class="c1"># We model this as a soft constraint with a very high multiplier</span>
    <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x0+2x1+3x2 &lt;= 40&#39;</span><span class="p">,</span> <span class="n">penalty_multiplier</span><span class="o">=.</span><span class="mi">25</span><span class="p">)</span>  <span class="c1"># this becomes a not so expensive penalty with this multiplier</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Best solution:                    [11.99999996  0.         30.        ]
Best objective with penalties:    26.50
x0+x1+x2:                         42.00
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/04_user_guide_07_diagnostic_13_1.png" src="../_images/04_user_guide_07_diagnostic_13_1.png" />
</div>
</div>
<p>Awesome! We know that that increasing by <span class="math notranslate nohighlight">\(2\)</span> the bound of the first constraint gives us extra <span class="math notranslate nohighlight">\(1.5\)</span> in the objective value – great argument to trigger a great discussion.</p>
<p>We also know that even if we move the bound to <span class="math notranslate nohighlight">\(12\)</span>, it is still the limiting factor in our setup. Iterating this approach will give us an idea of when this constraint stops being the limiting factor.</p>
</div>
</div>
<div class="section" id="Extrapolation-pitfall">
<h2>Extrapolation pitfall<a class="headerlink" href="#Extrapolation-pitfall" title="Permalink to this headline">¶</a></h2>
<p>Even if it’s tempting to use this tool to understand how big is the upside we can get if we de-bottleneck our plant, we have to keep always in mind that this optimization usually happens with an objective function which is based on historical data. In other words, if the constraint has never been (almost) tight on historical data, then we’re extrapolating and might be quite off.</p>
</div>
<div class="section" id="Complex-problem-support">
<h2>Complex problem support<a class="headerlink" href="#Complex-problem-support" title="Permalink to this headline">¶</a></h2>
<p>Up to this point we discussed the diagnostic tool by using a small linear program, with a closed mathematical form and interpretable constraints. In many practical applications we have to deal with compelex constraints and problems where some variables are optimizable and some are not, and the objective function is a predictive model.</p>
<p>To this end we support <code class="docutils literal notranslate"><span class="pre">StatefulOptimizationProblem</span></code>. This class enables users to define an objective function where a subset of the input variables are decision variables (e.g.&nbsp;are optimizable). As an example, we’ll setup a problem in a similar fashion as with the optimizer training, so we omit some details.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.neural_network</span> <span class="kn">import</span> <span class="n">MLPRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>

<span class="kn">from</span> <span class="nn">optimizer.problem</span> <span class="kn">import</span> <span class="n">StatefulOptimizationProblem</span>
<span class="kn">from</span> <span class="nn">optimizer.constraint.sets</span> <span class="kn">import</span> <span class="n">Integers</span>
<span class="kn">from</span> <span class="nn">optimizer</span> <span class="kn">import</span> <span class="n">repair</span>

<span class="kn">from</span> <span class="nn">optimizer.testing.problems</span> <span class="kn">import</span> <span class="n">Ackley</span>
<span class="n">dimension</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">ackley</span> <span class="o">=</span> <span class="n">Ackley</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">widgets</span><span class="p">(</span><span class="n">parameters_</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">ackley</span><span class="p">(</span><span class="n">parameters_</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">25</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="n">dimension</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;state_1&quot;</span><span class="p">,</span> <span class="s2">&quot;state_2&quot;</span><span class="p">,</span> <span class="s2">&quot;control_1&quot;</span><span class="p">,</span> <span class="s2">&quot;control_2&quot;</span><span class="p">,</span> <span class="s2">&quot;control_3&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">X</span><span class="p">[</span><span class="mi">2500</span><span class="p">:</span><span class="mi">5000</span><span class="p">],</span> <span class="n">X</span><span class="p">[</span><span class="mi">5000</span><span class="p">:</span><span class="mi">7500</span><span class="p">],</span> <span class="n">X</span><span class="p">[</span><span class="mi">7500</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">X</span><span class="p">[</span><span class="mi">2500</span><span class="p">:</span><span class="mi">5000</span><span class="p">],</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">X</span><span class="p">[</span><span class="mi">5000</span><span class="p">:</span><span class="mi">7500</span><span class="p">],</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">X</span><span class="p">[</span><span class="mi">7500</span><span class="p">:]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">frac</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">widgets</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="n">mlp</span> <span class="o">=</span> <span class="n">MLPRegressor</span><span class="p">(</span><span class="n">hidden_layer_sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="n">state</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mf">4.8</span><span class="p">,</span> <span class="mf">4.65</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.1</span><span class="p">,</span> <span class="mf">21.21</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">X</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
<span class="n">optimizable_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;control_1&quot;</span><span class="p">,</span> <span class="s2">&quot;control_2&quot;</span><span class="p">,</span> <span class="s2">&quot;control_3&quot;</span><span class="p">]</span>

<span class="n">circle_penalty</span> <span class="o">=</span> <span class="n">penalty</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;control_1&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">7</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;control_2&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">17</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;(control_1-7)^2 + (control_2-17)^2 &lt;= 100&#39;</span>
<span class="p">)</span>

<span class="n">state_control_penalty</span> <span class="o">=</span> <span class="n">penalty</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;state_1&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;control_1&quot;</span><span class="p">]),</span> <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="o">-.</span><span class="mi">7</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sin(state_1 * control_1) &lt;= -.7&#39;</span><span class="p">)</span>

<span class="n">integer_repair</span> <span class="o">=</span> <span class="n">repair</span><span class="p">(</span><span class="s2">&quot;control_3&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="n">Integers</span><span class="p">())</span>

<span class="n">problem</span> <span class="o">=</span> <span class="n">StatefulOptimizationProblem</span><span class="p">(</span>
    <span class="n">objective</span><span class="o">=</span><span class="n">mlp</span><span class="p">,</span>
    <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
    <span class="n">optimizable_columns</span><span class="o">=</span><span class="n">optimizable_columns</span><span class="p">,</span>
    <span class="n">penalties</span><span class="o">=</span><span class="p">[</span><span class="n">circle_penalty</span><span class="p">,</span> <span class="n">state_control_penalty</span><span class="p">],</span>
    <span class="n">repairs</span><span class="o">=</span><span class="p">[</span><span class="n">integer_repair</span><span class="p">],</span>
    <span class="n">sense</span><span class="o">=</span><span class="s2">&quot;maximize&quot;</span>
<span class="p">)</span>

<span class="n">bounds</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">optimizable_columns</span><span class="p">]</span>

<span class="n">solver</span> <span class="o">=</span> <span class="n">ParticleSwarmSolver</span><span class="p">(</span>
    <span class="n">bounds</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="s2">&quot;maximize&quot;</span><span class="p">,</span> <span class="n">popsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">maxiter</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
    <span class="n">cognitive_parameter</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
    <span class="n">inertia</span><span class="o">=</span><span class="mf">0.15</span>
<span class="p">)</span>

<span class="n">best_trajectory_logger</span> <span class="o">=</span> <span class="n">BestTrajectoryLogger</span><span class="p">()</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">solver</span><span class="o">.</span><span class="n">stop</span><span class="p">():</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">ask</span><span class="p">()</span>
    <span class="n">objective_values</span><span class="p">,</span> <span class="n">repaired_parameters</span> <span class="o">=</span> <span class="n">problem</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="n">solver</span><span class="o">.</span><span class="n">tell</span><span class="p">(</span><span class="n">repaired_parameters</span><span class="p">,</span> <span class="n">objective_values</span><span class="p">)</span>

    <span class="n">best_trajectory_logger</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best solution: {str(solver.best()[0]): &gt;53}&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best objective with penalties: {solver.best()[1]: &gt;8.2f}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Best solution:                    [5.07444661 7.26276215 2.        ]
Best objective with penalties:    20.68
</pre></div></div>
</div>
<p>The only thing that changes is that now we call <code class="docutils literal notranslate"><span class="pre">best_trajectory_problem_plot</span></code> and pass a different set of parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">best_trajectory_problem_plot</span><span class="p">(</span><span class="n">best_trajectory_logger</span><span class="p">,</span> <span class="n">problem</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">normalize_penalties</span><span class="o">=</span><span class="kc">False</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/04_user_guide_07_diagnostic_18_0.png" src="../_images/04_user_guide_07_diagnostic_18_0.png" />
</div>
</div>
</div>
<div class="section" id="Conclusion">
<h2>Conclusion<a class="headerlink" href="#Conclusion" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>We learned how to use the <code class="docutils literal notranslate"><span class="pre">best_trajectory_plot</span></code> to generate a meaningful report with a couple of lines of code.</li>
<li>This can be used as a diagnostic tool: If we know that some constraint is the biggest challenge in the operation, then we better see it tight or violated during the optimization. If it is not, maybe we should check the code, assumptions or variable scaling.</li>
<li>With caution we can also use this to understand how different constraints are impacting our operation. We always have to keep in mind all the assumptions that go into this, and one of them is that the predictive model used is behaving well in the frontiers of the constraints.</li>
<li>The optimization diagnostics are applicable in generic settings - most of the tutorial was using a linear program, but we also used a <code class="docutils literal notranslate"><span class="pre">StatefulOptimizationProblem</span></code>, and incorporated many kinds of penalties.</li>
</ul>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Found a bug, or didn’t find what you were looking for? <a class="reference external" href="https://git.mckinsey-solutions.com/opm/optimus/issues/new/choose">🙏Please file a
issue</a></p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="08_history_penalty.html" class="btn btn-neutral float-right" title="Historical penalties" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="06_plotting.html" class="btn btn-neutral float-left" title="Plotting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, QuantumBlack

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>